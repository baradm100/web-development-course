@model IEnumerable<web_development_course.Models.Branch>

@{
    ViewData["Title"] = "Stores";
}

<h1>Stores</h1>
<div class="row">
    <div id="stores"class="col-xl-7 mb-4">
        <div class="from-container bg-white">
            @for (int i = 0; i < Model.ToList().Count; i++)
            {
                <div class="card">
                    <div class="card-body">
                        <h3 class="card-title">@Model.ToList()[i].Name</h3>
                        <div class="row">
                            <div class="col-xl-4 mb-4">
                                <b class="txt-lg col-sm-12">Address</b>
                                <div class="txt-md col-sm-12">@Model.ToList()[i].Address</div>
                            </div>
                            <div class="col-xl-4 mb-4">
                                <b class="txt-lg col-sm-12">Opening Hours</b>
                                @functions {
                                    private string OpenDays(IEnumerable<OpeningHour> item)
                                    {
                                        string str = "";
                                        List<OpeningHour> sortedList = item.OrderBy(o => o.DayOfWeek).ToList();

                                        foreach (var day in sortedList)
                                        {
                                            str += day.ToString();
                                        }
                                        return str;
                                    }

                                }
                                <p class="txt-md col-sm-12" style="white-space: pre-line">@OpenDays(Model.ToList()[i].OpeningHours) </p>
                            </div>
                            <div class="col ">
                                <div class="col  d-flex justify-content-center align-items-center">
                                    <button type="button" class="btn btn-primary text-center shadow" marker-position-show="@i">Show In Map</button>
                                </div>
                                <div class="col  d-flex justify-content-center align-items-center">
                                    <a asp-action="Edit" asp-route-id="@Model.ToList()[i].Id">Edit</a> |
                                    <a asp-action="Delete" asp-route-id="@Model.ToList()[i].Id">Delete</a>
                                </div>                         
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
    <div class="col">
        <div id="map-container" class="from-container" >
            <div id="google-map"></div>
        </div>
    </div>
 
</div>

@section Scripts{
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script src="~/js/googlemaps.js" type="text/javascript"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDZ2pOfh-9YmVLc7XaMifZUGQBS6exoWgY&callback=initMap&libraries=&v=weekly"></script>

}


<p>
    <a asp-action="Create">Create New</a>
</p>
